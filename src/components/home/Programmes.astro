---
import { normaliseLocale, useTranslations } from "../../i18n/utils";
import type { Lang } from "../../i18n/ui";

interface Card {
  title: string;
  age: string;
  blurb: string;
  href: string;
}
interface Props {
  cards: Card[];
}
const { cards } = Astro.props;

const lang: Lang = normaliseLocale(Astro.currentLocale);
const t = useTranslations(lang);
---

<section class="py-10 lg:py-16 border-t border-black/10">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <h2 class="text-2xl sm:text-3xl font-semibold tracking-tight">
      {t("home.programmes")}
    </h2>
    <p class="mt-2 text-black/70 max-w-prose">
      {t("home.programmesDesc")}
    </p>
    <div class="mt-10 grid gap-8 md:grid-cols-2">
      {
        cards.map((c, index) => {
          const isSpark = c.title.includes('Spark');
          const streamColor = isSpark ? 'var(--color-spark)' : 'var(--color-sustain)';
          const streamClass = isSpark ? 'stream-spark' : 'stream-sustain';
          const indicatorClass = isSpark ? 'stream-indicator-spark' : 'stream-indicator-sustain';
          
          return (
            <a
              href={c.href}
              class={`group block card card-interactive p-8 ${streamClass} relative overflow-hidden`}
              style={`border: 2px solid ${streamColor}20; border-left: 4px solid ${streamColor};`}
            >
              <div class="flex items-center gap-3 mb-4">
                <span class={`stream-indicator ${indicatorClass}`}></span>
                <div class="text-xs uppercase tracking-wide font-bold" style={`color: ${streamColor};`}>
                  {c.age}
                </div>
              </div>
              <div class="h3 mb-3">{c.title}</div>
              <p class="text-black/75 leading-relaxed mb-6">{c.blurb}</p>
              <div class="inline-flex items-center gap-2 text-sm font-semibold group-hover:underline underline-offset-4 transition-all duration-200" style={`color: ${streamColor}; text-decoration-color: ${streamColor};`}>
                {t("home.explore").replace("{title}", c.title)} <span aria-hidden class="group-hover:translate-x-1 transition-transform duration-200">â†’</span>
              </div>
            </a>
          );
        })
      }
    </div>
  </div>
</section>
